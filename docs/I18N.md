# üåç Internacionalizaci√≥n (i18n)

## Descripci√≥n General

El proyecto Task Timer App est√° configurado para soportar m√∫ltiples idiomas usando el sistema de internacionalizaci√≥n de Flutter (`flutter_localizations` e `intl`).

## üó£Ô∏è Idiomas Soportados

| Idioma | C√≥digo | Estado | Archivo ARB |
|--------|--------|--------|-------------|
| Espa√±ol | `es` | ‚úÖ Completo | `app_es.arb` |
| Ingl√©s | `en` | ‚úÖ Completo | `app_en.arb` |

**Idioma por defecto**: Espa√±ol (`es`)

## üìÅ Estructura de Archivos

```
lib/
‚îú‚îÄ‚îÄ l10n/
‚îÇ   ‚îú‚îÄ‚îÄ app_en.arb              # Traducciones en ingl√©s
‚îÇ   ‚îú‚îÄ‚îÄ app_es.arb              # Traducciones en espa√±ol (plantilla)
‚îÇ   ‚îú‚îÄ‚îÄ app_localizations.dart  # Clase generada (no editar)
‚îÇ   ‚îú‚îÄ‚îÄ app_localizations_en.dart  # Implementaci√≥n EN (generado)
‚îÇ   ‚îî‚îÄ‚îÄ app_localizations_es.dart  # Implementaci√≥n ES (generado)
‚îú‚îÄ‚îÄ main.dart
‚îî‚îÄ‚îÄ ...

l10n.yaml                        # Configuraci√≥n de generaci√≥n
pubspec.yaml                     # Dependencies y configuraci√≥n
```

## ‚öôÔ∏è Configuraci√≥n

### l10n.yaml

```yaml
arb-dir: lib/l10n
template-arb-file: app_es.arb
output-localization-file: app_localizations.dart
output-class: AppLocalizations
preferred-supported-locales: ['es']
```

### pubspec.yaml

```yaml
dependencies:
  flutter_localizations:
    sdk: flutter
  intl: ^0.20.2

flutter:
  generate: true
```

### main.dart

```dart
import 'package:flutter_localizations/flutter_localizations.dart';
import 'l10n/app_localizations.dart';

MaterialApp(
  localizationsDelegates: const [
    AppLocalizations.delegate,
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: const [
    Locale('es'), // Spanish
    Locale('en'), // English
  ],
  locale: const Locale('es'), // Default
  // ...
)
```

## üìù Strings Disponibles

### Navegaci√≥n y Secciones

| Key | Espa√±ol | English |
|-----|---------|---------|
| `appTitle` | Task Timer | Task Timer |
| `tasks` | Tareas | Tasks |
| `timer` | Temporizador | Timer |
| `statistics` | Estad√≠sticas | Statistics |
| `settings` | Configuraci√≥n | Settings |

### Acciones de Tareas

| Key | Espa√±ol | English |
|-----|---------|---------|
| `createTask` | Crear Tarea | Create Task |
| `editTask` | Editar Tarea | Edit Task |
| `deleteTask` | Eliminar Tarea | Delete Task |
| `save` | Guardar | Save |
| `cancel` | Cancelar | Cancel |
| `delete` | Eliminar | Delete |
| `confirm` | Confirmar | Confirm |
| `complete` | Completar | Complete |

### Campos de Tarea

| Key | Espa√±ol | English |
|-----|---------|---------|
| `taskTitle` | T√≠tulo | Title |
| `taskDescription` | Descripci√≥n | Description |
| `taskEstimatedTime` | Tiempo Estimado | Estimated Time |
| `taskPriority` | Prioridad | Priority |

### Prioridades

| Key | Espa√±ol | English |
|-----|---------|---------|
| `priorityHigh` | Alta | High |
| `priorityMedium` | Media | Medium |
| `priorityLow` | Baja | Low |

### Control del Timer

| Key | Espa√±ol | English |
|-----|---------|---------|
| `start` | Iniciar | Start |
| `pause` | Pausar | Pause |
| `resume` | Reanudar | Resume |
| `stop` | Detener | Stop |

### Mensajes con Placeholders

| Key | Formato | Ejemplo ES | Ejemplo EN |
|-----|---------|------------|------------|
| `pomodoroMinutes` | `{minutes} minutos` | 25 minutos | 25 minutes |
| `completedTasks` | `Tareas Completadas: {count}` | Tareas Completadas: 5 | Completed Tasks: 5 |
| `totalTime` | `Tiempo Total: {hours}h {minutes}m` | Tiempo Total: 2h 30m | Total Time: 2h 30m |

### Notificaciones

| Key | Espa√±ol | English |
|-----|---------|---------|
| `taskCompletedNotification` | ¬°Tarea completada! | Task completed! |
| `pomodoroCompletedNotification` | ¬°Pomodoro completado! Tiempo de descanso. | Pomodoro completed! Break time. |

### Estados y Validaciones

| Key | Espa√±ol | English |
|-----|---------|---------|
| `noTasksFound` | No hay tareas | No tasks found |
| `createFirstTask` | Crea tu primera tarea | Create your first task |
| `deleteConfirmation` | ¬øEst√°s seguro de eliminar esta tarea? | Are you sure you want to delete this task? |
| `requiredField` | Este campo es requerido | This field is required |
| `invalidTime` | Tiempo inv√°lido | Invalid time |

### Fechas y Tiempo

| Key | Espa√±ol | English |
|-----|---------|---------|
| `today` | Hoy | Today |
| `yesterday` | Ayer | Yesterday |
| `thisWeek` | Esta Semana | This Week |
| `thisMonth` | Este Mes | This Month |

### Configuraci√≥n

| Key | Espa√±ol | English |
|-----|---------|---------|
| `darkMode` | Modo Oscuro | Dark Mode |
| `language` | Idioma | Language |
| `notifications` | Notificaciones | Notifications |
| `vibration` | Vibraci√≥n | Vibration |
| `about` | Acerca de | About |

**Total**: 45+ strings traducidos

## üöÄ Uso en el C√≥digo

### Acceso B√°sico

```dart
import 'package:flutter/material.dart';
import '../l10n/app_localizations.dart';

class MyWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final l10n = AppLocalizations.of(context)!;
    
    return Text(l10n.appTitle); // "Task Timer"
  }
}
```

### Con Par√°metros

```dart
// String con placeholders
final minutes = 25;
final text = l10n.pomodoroMinutes(minutes); // "25 minutos"

// Multiple placeholders
final hours = 2;
final mins = 30;
final total = l10n.totalTime(hours, mins); // "Tiempo Total: 2h 30m"
```

### En Widgets Comunes

```dart
// AppBar
AppBar(
  title: Text(l10n.tasks),
),

// Button
ElevatedButton(
  onPressed: () {},
  child: Text(l10n.createTask),
),

// Dialog
AlertDialog(
  title: Text(l10n.deleteConfirmation),
  actions: [
    TextButton(
      onPressed: () => Navigator.pop(context),
      child: Text(l10n.cancel),
    ),
    TextButton(
      onPressed: () {},
      child: Text(l10n.confirm),
    ),
  ],
),
```

## ‚ûï Agregar Nuevos Strings

### 1. Editar app_es.arb (plantilla)

```json
{
  "@@locale": "es",
  "myNewString": "Mi nuevo texto en espa√±ol",
  "@myNewString": {
    "description": "Descripci√≥n del prop√≥sito del string"
  }
}
```

### 2. Editar app_en.arb

```json
{
  "@@locale": "en",
  "myNewString": "My new text in English",
  "@myNewString": {
    "description": "Description of string purpose"
  }
}
```

### 3. Regenerar Archivos

```bash
flutter pub get
# o
flutter gen-l10n
```

### 4. Usar en el C√≥digo

```dart
final l10n = AppLocalizations.of(context)!;
Text(l10n.myNewString);
```

## üåê Agregar Nuevo Idioma

### 1. Crear Archivo ARB

Crear `lib/l10n/app_[c√≥digo].arb`:

```json
{
  "@@locale": "fr",
  "appTitle": "Task Timer",
  "tasks": "T√¢ches",
  // ... traducciones
}
```

### 2. Actualizar main.dart

```dart
supportedLocales: const [
  Locale('es'),
  Locale('en'),
  Locale('fr'), // ‚Üê Nuevo
],
```

### 3. Regenerar

```bash
flutter pub get
```

## üîÑ Cambiar Idioma en Runtime

### Con Provider/Riverpod

```dart
// Define provider
final localeProvider = StateProvider<Locale>((ref) => const Locale('es'));

// En MaterialApp
Consumer(
  builder: (context, ref, child) {
    final locale = ref.watch(localeProvider);
    
    return MaterialApp(
      locale: locale,
      // ...
    );
  },
)

// Cambiar idioma
ref.read(localeProvider.notifier).state = const Locale('en');
```

## üìä Estad√≠sticas

| M√©trica | Valor |
|---------|-------|
| Idiomas soportados | 2 (ES, EN) |
| Strings traducidos | 45+ |
| Strings con placeholders | 3 |
| Categor√≠as | 8 |
| Archivos generados | 3 |

## ‚úÖ Mejores Pr√°cticas

### ‚úÖ DO

- ‚úÖ Usar `AppLocalizations.of(context)` para acceder a strings
- ‚úÖ Agregar descripciones a todos los strings
- ‚úÖ Usar placeholders para contenido din√°mico
- ‚úÖ Mantener consistencia entre idiomas
- ‚úÖ Regenerar despu√©s de cambios en ARB
- ‚úÖ Testear ambos idiomas

### ‚ùå DON'T

- ‚ùå Hardcodear strings en el c√≥digo
- ‚ùå Olvidar traducir strings nuevos
- ‚ùå Usar concatenaci√≥n de strings
- ‚ùå Editar archivos generados (.dart en l10n/)
- ‚ùå Mezclar l√≥gica de negocio con strings de UI

## üêõ Troubleshooting

### Archivos no se Generan

```bash
# Limpiar y regenerar
flutter clean
flutter pub get
```

### Import no Funciona

```dart
// Verificar que el import sea correcto
import 'l10n/app_localizations.dart'; // ‚úÖ Correcto
import 'package:flutter_gen/gen_l10n/app_localizations.dart'; // ‚ùå Incorrecto para este proyecto
```

### Strings no Aparecen

```dart
// Verificar que MaterialApp tenga localizationsDelegates
localizationsDelegates: const [
  AppLocalizations.delegate,
  GlobalMaterialLocalizations.delegate,
  GlobalWidgetsLocalizations.delegate,
  GlobalCupertinoLocalizations.delegate,
],
```

### Error "of() called with null"

```dart
// Asegurarse de usar ! o ?? despu√©s de of()
final l10n = AppLocalizations.of(context)!; // ‚úÖ
// o
final l10n = AppLocalizations.of(context) ?? defaultLocalization; // ‚úÖ
```

## üîó Referencias

- [Flutter Internationalization](https://docs.flutter.dev/development/accessibility-and-localization/internationalization)
- [intl Package](https://pub.dev/packages/intl)
- [ARB Format Specification](https://github.com/google/app-resource-bundle)
- [flutter_localizations](https://api.flutter.dev/flutter/flutter_localizations/flutter_localizations-library.html)

## üìÖ √öltima Actualizaci√≥n

- **Fecha**: Noviembre 12, 2025
- **Versi√≥n**: 0.1.0
- **Idiomas**: Espa√±ol (ES), Ingl√©s (EN)
- **Strings**: 45+ traducidos

---

**¬øNecesitas agregar un nuevo idioma?** Sigue la secci√≥n "Agregar Nuevo Idioma" de esta gu√≠a.
